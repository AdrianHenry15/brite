generator client {
    provider = "prisma-client-js"
}

// Set your database connection URL
datasource db {
    provider = "mongodb"
    url      = env("DATABASE_URL")
}

model User {
    id         String      @id @default(auto()) @map("_id") @db.ObjectId
    phone      String?     @unique
    email      String      @unique
    name       String
    img        String
    purchases  String?
    wishlist   String?
    discounts  String?
    role       Roles
    addresses  Address[]
    created_at DateTime    @default(now())
    components Component[] // Adding a field to establish the relationship
}

model Component {
    id              String   @id @default(auto()) @map("_id") @db.ObjectId
    title           String
    content         String
    img             String?
    NavPage         String?  @unique
    isActive        Boolean?
    backgroundColor String?
    textColor       String?
    link            String?
    type            String?
    metadata        Json
    tags            String?
    author          User     @relation(fields: [authorId], references: [id]) // Define the relationship
    authorId        String   @db.ObjectId
    created_at      DateTime @default(now())
    updated_at      DateTime @default(now())
}

enum Roles {
    USER
    ADMIN
}

// Address is an embedded document
type Address {
    street String
    city   String
    state  String
    zip    String
}
